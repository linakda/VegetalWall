@page
@model WallModel
@{
    ViewData["Title"] = "Mur Vegetal";
}
@section heads{
  <link href="@Url.Content("~/css/usersite/wallpage.css")" rel="stylesheet" type="text/css" />
  <script src="https://www.amcharts.com/lib/4/core.js"></script>
  <script src="https://www.amcharts.com/lib/4/charts.js"></script>
  <script src="https://www.amcharts.com/lib/4/themes/spiritedaway.js"></script>
  <script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
  <script type="text/javascript" src="@Url.Content("~/js/graph.js")"></script>
}

<div class="wall-body">
  @{
            var currentTimeStamp = (Int32)(DateTime.Now.Subtract(new DateTime(1970, 1, 1))).TotalSeconds;
            //Traitement de la requête GET
            @if (@Model.IsError == false){ 
              @foreach (var e in @Model.Result){
                @if (1==1){//condition de verification données
                    @if(e.idSensorType==0){
                      <div class="wall-block box">
                        <div class="info">
                          <div class="air-icon"><img class="i1" src="~/images/icones/air.png"/></div>
                          <div class="air-text">Qualité de l'air :</div>
                        </div>
                        <div class="chart @e.id"> 
                        <script>graph.lineChart("@e.id", tab_temp, 0);</script>
                        </div>
                         </div>
                    }
                    @if(e.idSensorType==1){
                      <div class="wall-block box">
                      <div class="info">
                        <div class="temp-icon"><img class="i1" src="~/images/icones/thermo.png"/></div>
                        <div class="temp-text">Température :</div>
                      </div>
                      <div class="chart @e.id"> 
                        <script>graph.lineChart("@e.id", tab_temp, 0);</script>
                      </div>
                       </div>
                    }
                    @if(e.idSensorType==2){
                      <div class="wall-block box">
                        <div class="info">
                          <div class="pression-icon"><img class="i1" src="~/images/icones/pression.png"/></div>
                          <div class="pression-text">Pression : </div>
                        </div>
                        <div class="chart @e.id"> 
                          <script>graph.lineChart("@e.id", tab_temp, 1);</script>
                        </div>
                         </div>
                    }
                    @if(e.idSensorType==3){
                      <div class="wall-block box">
                        <div class="info">
                          <div class="hydro-icon"><img class="i1" src="~/images/icones/hydro.png"/></div>
                          <div class="hydro-text">Humidité :</div>
                        </div>
                        <div class="chart @e.id"> 
                          <script>graph.lineChart("@e.id", tab_temp, 1);</script>
                        </div>
                         </div>
                    }
                    @if(e.idSensorType==4){
                      <div class="wall-block box">
                        <div class="info">
                          <div class="pr-icon"><img class="i1" src="~/images/icones/pression_ruche.png"/></div>
                          <div class="pr-text">Pression ruche :</div>
                        </div>
                        <div class="chart @e.id"> 
                          <script>graph.lineChart("@e.id", tab_temp, 1);</script>
                        </div>
                         </div>
                    }
                    @if(e.idSensorType==5){
                      <div class="wall-block box">
                        <div class="info">
                          <div class="mouv-icon"><img class="i1" src="~/images/icones/mouvement.png"/></div>
                          <div class="mouv-text">Flux entrant/sortant : </div>
                        </div>
                        <div class="chart @e.id"> 
                          <script>graph.columnChart("@e.id", tab_temp);</script>
                        </div>
                         </div>
                    }
                    @if(e.idSensorType==6){
                      <div class="wall-block box">
                        <div class="info">
                          <div class="tr-icon"><img class="i1" src="~/images/icones/thermo_ruche.png"/></div>
                          <div class="tr-text">Température ruche : </div>
                        </div>
                        <div class="chart @e.id"> 
                          <script>graph.lineChart("@e.id", tab_temp, 1);</script>
                        </div>
                         </div>
                    }
                }
              }
            }
            else {
              <div class="wall-block box">Erreur API</div>
            }
  }
</div> 

  